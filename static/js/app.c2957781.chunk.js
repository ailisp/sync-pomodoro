(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{277:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r={};n.r(r),n.d(r,"toplevelEvent1",(function(){return x})),n.d(r,"goPath",(function(){return O})),n.d(r,"_setState",(function(){return I})),n.d(r,"tick",(function(){return k})),n.d(r,"startTimer",(function(){return S})),n.d(r,"endTimer",(function(){return j})),n.d(r,"resetTimer",(function(){return C})),n.d(r,"resetFinished",(function(){return T})),n.d(r,"nextTimer",(function(){return D})),n.d(r,"timerState",(function(){return A}));var a,o,i=n(0),c=n.n(i),u=n(7),s=n.n(u),l=n(68),m=n.n(l),f=n(17),p=n(3),d=n.n(p),b=n(175),w=n(69),h=n(238),g=n.n(h),y=n(306),v=g()("http://timer.carrymusic.club");function E(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:v.emit("setState",e.get("timer").toJS());case 1:case"end":return t.stop()}}),null,null,null,Promise)}var x=function(e,t){return e.set("text2","ccc")},O=function(e,t){var n=t.path;if("web"==f.a.OS){var r=new URL(window.location);r.pathname=n,window.history.pushState({},"",r)}return e.set("path",n)},I=function(e,t){return t.newState};"web"==f.a.OS&&(window.setState=function(e){Y("_setState",{newState:e})});var k=function(e,t){t.timestamp;var r,i=e;if(i.getIn(["timer","started"])){var c=i.getIn(["timer","remain"]);if(c>0)return i.setIn(["timer","remain"],c-1);var u=i.getIn(["timer","status"]);return r=u,d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if("work"!=r){e.next=9;break}if(a){e.next=5;break}return e.next=4,d.a.awrap(b.a.Sound.createAsync(n(313)));case 4:a=e.sent.sound;case 5:return e.next=7,d.a.awrap(a.playAsync());case 7:e.next=16;break;case 9:if("rest"!=r){e.next=16;break}if(o){e.next=14;break}return e.next=13,d.a.awrap(b.a.Sound.createAsync(n(314)));case 13:o=e.sent.sound;case 14:return e.next=16,d.a.awrap(o.playAsync());case 16:case"end":return e.stop()}}),null,null,null,Promise),status="work"==u?"rest":"work",i=i.setIn(["timer","remain"],W[status]).setIn(["timer","status"],status),"work"==u&&(i=i.updateIn(["timer","finished"],(function(e){return e+1}))),i}return i},S=function(e,t){var n=e;if(!n.getIn(["timer","started"]))return E(n=n.set("timer",n.get("timer").set("started",!0))),n},j=function(e,t){var n=e;if(n.getIn(["timer","started"]))return E(n=n.setIn(["timer","started"],!1)),n};function P(e){return e.setIn(["timer","remain"],W[e.getIn(["timer","status"])])}var C=function(e,t){var n=P(e);return E(n),n},T=function(e,t){var n=e.setIn(["timer","finished"],0);return E(n),n},D=function(e,t){var n;return E(n=P(n="work"==e.getIn(["timer","status"])?e.updateIn(["timer","finished"],(function(e){return e+1})).setIn(["timer","status"],"rest"):e.setIn(["timer","status"],"work"))),n},A=function(e,t){var n=Object(w.b)(t).delete("type");return e.mergeDeep({timer:n})},B=n(5),R=n(64),z=n(4),F=n(33);Object(i.memo)((function(e){var t=e.text1;return console.log("enter ExampleComponent"),c.a.createElement(z.a,null,c.a.createElement(F.a,null,t),c.a.createElement(R.a,{onPress:function(){return Y("toplevelEvent1")},title:"click"}))})),Object(i.memo)((function(){return console.log("enter ConstComponent"),c.a.createElement(F.a,null,"bbb")})),Object(i.memo)((function(e){var t=e.text2;return console.log("enter ViewComponent"),c.a.createElement("p",null,t)}));B.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});var J=n(107),V=n(40);function _(e){var t=e.state;return c.a.createElement(J.a,{style:L.container},c.a.createElement(H,{status:t.getIn(["timer","status"]),finished:t.getIn(["timer","finished"]),started:t.getIn(["timer","started"]),remain:t.getIn(["timer","remain"])}))}function H(e){var t=e.status,n=e.remain,r=e.finished,a=e.started;return c.a.createElement(z.a,null,c.a.createElement(F.a,{style:L.text},t),c.a.createElement(F.a,{style:L.text},function(e){var t=Math.floor(e/60),n=e-60*t;(t=t.toString()).length<2&&(t="0"+t);(n=n.toString()).length<2&&(n="0"+n);return t+":"+n}(n)),c.a.createElement(F.a,{style:L.text2},"Finished: ",r),c.a.createElement(z.a,{style:L.buttons},a?c.a.createElement(V.Button,{onPress:function(){return Y("endTimer")},rounded:!0},c.a.createElement(V.Icon,{name:"controller-paus",type:"Entypo"})):c.a.createElement(V.Button,{onPress:function(){return Y("startTimer")},rounded:!0},c.a.createElement(V.Icon,{name:"controller-play",type:"Entypo"})),c.a.createElement(V.Button,{onPress:function(){return Y("resetTimer")},title:"Reset",rounded:!0},c.a.createElement(V.Icon,{name:"controller-fast-backward",type:"Entypo"})),c.a.createElement(V.Button,{onPress:function(){return Y("nextTimer")},title:"Next",rounded:!0},c.a.createElement(V.Icon,{name:"controller-fast-forward",type:"Entypo"})),c.a.createElement(V.Button,{onPress:function(){return Y("resetFinished")},title:"Reset",rounded:!0},c.a.createElement(V.Icon,{name:"cw",type:"Entypo"}))))}var L=B.a.create({text:{fontSize:"40px",color:"#1aabdb"},text2:{fontSize:"36px",color:"#00c9b7"},container:{textAlign:"center",marginVertical:8,marginHorizontal:8,backgroundColor:"#dae4f2",height:"100%"},button:{color:"#ffffff"},buttons:{flexDirection:"row",justifyContent:"space-between",width:300,maxWidth:300,margin:"auto"}}),M={"/":_,"/page1":function(e){e.state;return c.a.createElement("div",null,c.a.createElement("h1",null,"This is a html page"),c.a.createElement("p",{style:{color:"blue"}},"use css"),c.a.createElement("button",{onClick:function(){return Y("goPath",{path:"/"})}},"go home"),c.a.createElement("a",{href:"/"},"go home"))}};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={work:1500,rest:300},q=Object(w.a)({timer:Object(w.a)({started:!1,finished:0,remain:W.work,status:"work"}),text1:"aaa",text2:"bbb",path:"web"==f.a.OS?window.location.pathname:"/"}),G=Object(i.createContext)(q),K=G.Provider,Q=function(e){var t=e.children,n=Object(i.useReducer)((function(e,t){return r[t.type](e,t)||e}),q),a=m()(n,2),o=a[0],u=a[1];return c.a.createElement(K,{value:{state:o,dispatch:u}},t)},X=function(e){};function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X(U(U({},t),{},{type:e}))}function Z(){var e=Object(i.useContext)(G),t=e.state,n=e.dispatch;X=n,"web"==f.a.OS&&(window.state=t);var r,a=(r=t.get("path"),M[r]||_);return Object(i.useEffect)((function(){d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:v.on("state",(function(e){console.log("on state"),Y("timerState",e)})),v.emit("getState"),y((function(){return Y("tick",{timestamp:new Date})}),1e3,{aligned:!0,immediate:!0});case 3:case"end":return e.stop()}}),null,null,null,Promise)}),[]),c.a.createElement(a,{state:t})}function $(){return c.a.createElement(Q,null,c.a.createElement(Z,null))}"web"==f.a.OS&&(window.d=Y)},281:function(e,t,n){e.exports=n(407)},313:function(e,t,n){e.exports=n.p+"static/media/work.fa89053c.mp3"},314:function(e,t,n){e.exports=n.p+"static/media/rest.91e6c465.mp3"}},[[281,1,2]]]);
//# sourceMappingURL=app.c2957781.chunk.js.map